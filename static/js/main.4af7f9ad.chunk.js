(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(11),i=n.n(a),u=n(23),o=n(18),d=n(45),s=n.n(d),l=Object(o.b)({selectId:function(e){return e.uuid},sortComparer:function(e,t){return s()(e.name,t.name,{caseInsensitive:!0})}}),j=Object(o.c)({name:"encounters",initialState:l.getInitialState,reducers:{addEncounter:l.addOne,removeEncounter:l.removeOne}}),x=j.actions,b=(x.addEncounter,x.removeEncounter,l.getSelectors((function(e){return e.encounters})).selectAll),O=j.reducer,h=Object(o.b)({selectId:function(e){return e.uuid},sortComparer:function(e,t){return s()(e.name,t.name,{caseInsensitive:!0})}}),v=Object(o.c)({name:"monsters",initialState:h.getInitialState,reducers:{addMonster:h.addOne,removeMonster:h.removeOne}}),m=v.actions,p=(m.addMonster,m.removeMonster,v.reducer),f=n(2),g=n(44),y=n(96);function C(e){e.sort((function(e,t){var n=t.initiative-e.initiative;return 0===n?e.order-t.order:n})),function(e){var t=0,n=null;e.forEach((function(e){e.initiative!==n?(n=e.initiative,t=0):t++,e.order=t}))}(e)}function N(e,t){return(t+e.currentTurn)%e.creatures.length}var T=Object(o.c)({name:"initiativeTracker",initialState:{creatures:[],currentTurn:0,round:0},reducers:{addCreature:function(e,t){var n,r=null===(n=e.creatures[e.currentTurn])||void 0===n?void 0:n.uuid,c=Object(f.a)({order:0,uuid:Object(y.a)()},t.payload);e.creatures.push(c),C(e.creatures),e.creatures.length>1&&(0!==e.currentTurn||0!==e.round)&&(e.currentTurn=e.creatures.findIndex((function(e){return e.uuid===r})))},deleteCreature:function(e,t){var n,r=null===(n=e.creatures[e.currentTurn])||void 0===n?void 0:n.uuid,c=N(e,t.payload);if(e.creatures.splice(c,1),e.creatures.length>1&&(0!==e.currentTurn||0!==e.round)){var a=e.creatures.findIndex((function(e){return e.uuid===r}));-1!==a&&(e.currentTurn=a)}},editCreature:function(e,t){var n=N(e,t.payload.index);e.creatures[n]=Object(f.a)(Object(f.a)({},e.creatures[n]),t.payload.creature),C(e.creatures)},previous:function(e){e.currentTurn--,-1===e.currentTurn&&e.round>0&&(e.round-=1,e.currentTurn=e.creatures.length-1),e.currentTurn<0&&(e.currentTurn=0),e.round<0&&(e.round=0)},next:function(e){e.currentTurn=(e.currentTurn+1)%Math.max(e.creatures.length,1),0===e.currentTurn&&(e.round+=1)},changeInitiative:function(e,t){var n=t.payload.newInitiative;if(!isNaN(Number(n))||""===n){var r=N(e,t.payload.index);e.creatures[r].initiative=""===n?0:Number(n),C(e.creatures)}},rollAllInitiative:function(e){e.creatures.forEach((function(t){if("monster"===t.type){t.initiative=Math.floor(20*Math.random()+1),C(e.creatures)}}))},adjustCreatureHealth:function(e,t){var n,r,c,a=N(e,t.payload.index),i=e.creatures[a].currentHp+t.payload.amount;e.creatures[a].currentHp=(n=i,r=0,c=e.creatures[a].maxHp,Math.min(Math.max(n,r),c))},reorderCreature:function(e,t){var n=N(e,t.payload.index),r=N(e,t.payload.newIndex);e.creatures[n].initiative=e.creatures[r].initiative,e.creatures[n].order=e.creatures[r].order+(n<r?1:-1),C(e.creatures)}}}),k=T.actions,I=k.addCreature,A=k.deleteCreature,H=k.editCreature,w=k.changeInitiative,M=k.next,S=k.previous,E=k.adjustCreatureHealth,q=k.rollAllInitiative,z=k.reorderCreature,P=function(e){return e.initiativeTracker.currentTurn},F=function(e){return e.initiativeTracker.round},R=Object(g.a)((function(e){return e.initiativeTracker.creatures}),P,(function(e,t){return e.slice(t).concat(e.slice(0,t))})),B=T.reducer,D={name:"",ac:0,maxHp:0,initiative:0,type:"monster",modalOpen:!1,editingMode:!1,editIndex:0},G=Object(o.c)({name:"quickAdd",initialState:D,reducers:{changeName:function(e,t){e.name=t.payload},changeAc:function(e,t){isNaN(t.payload)||(e.ac=t.payload)},changeMaxHp:function(e,t){isNaN(t.payload)||(e.maxHp=t.payload)},changeInitiative:function(e,t){isNaN(t.payload)||(e.initiative=t.payload)},changeType:function(e,t){e.type=t.payload},open:function(e){e.modalOpen=!0},close:function(){return JSON.parse(JSON.stringify(D))},edit:function(e,t){var n,r,c,a,i;e.editingMode=!0,e.name=null!==(n=t.payload.creature.name)&&void 0!==n?n:"",e.ac=null!==(r=t.payload.creature.ac)&&void 0!==r?r:0,e.maxHp=null!==(c=t.payload.creature.maxHp)&&void 0!==c?c:0,e.initiative=null!==(a=t.payload.creature.initiative)&&void 0!==a?a:0,e.modalOpen=!0,e.editIndex=t.payload.index,e.type=null!==(i=t.payload.creature.type)&&void 0!==i?i:"monster"}}}),L=G.actions,J=L.changeName,Q=L.changeAc,U=L.changeMaxHp,V=L.changeInitiative,W=L.open,K=L.close,X=L.edit,Y=L.changeType,Z=function(e){return e.quickAdd.name},$=function(e){return e.quickAdd.ac},_=function(e){return e.quickAdd.maxHp},ee=function(e){return e.quickAdd.initiative},te=function(e){return e.quickAdd.modalOpen},ne=function(e){return e.quickAdd.editingMode},re=function(e){return e.quickAdd.editIndex},ce=function(e){return e.quickAdd.type},ae=G.reducer,ie=Object(o.a)({reducer:{encounters:O,monsters:p,initiativeTracker:B,quickAdd:ae}}),ue=function(){return Object(u.c)()},oe=u.d,de=n(35),se=n(7),le=n(1),je=function(){return Object(le.jsx)("div",{children:Object(le.jsx)(se.b,{})})},xe=function(){return Object(le.jsx)("div",{children:"This is where you will go to edit an encounter!"})},be=n(94),Oe=n(88),he=n(89),ve=n(63),me=n(97),pe=n(64);function fe(){return Object(le.jsx)(be.a,{variant:"info",children:"There are no encounters yet. Create one now!"})}function ge(){var e=oe(b),t=e.map((function(e){return Object(le.jsx)("div",{children:e.name},e.uuid)}));return Object(le.jsx)("div",{children:0===e.length?Object(le.jsx)(fe,{}):t})}var ye=function(){return Object(le.jsx)("div",{children:Object(le.jsxs)(Oe.a,{fluid:!0,className:"my-3",children:[Object(le.jsxs)(he.a,{children:[Object(le.jsx)(ve.a,{children:Object(le.jsx)("h1",{children:"My Encounters"})}),Object(le.jsx)(ve.a,{md:"auto",children:Object(le.jsxs)(me.a,{direction:"horizontal",gap:2,children:[Object(le.jsx)(de.b,{to:"/encounters/quick/run",children:Object(le.jsx)(pe.a,{variant:"outline-primary",children:"Quick Run Encounter"})}),Object(le.jsx)(pe.a,{variant:"primary",onClick:function(){return alert("Not implemented yet!")},children:"Add Encounter"})]})})]}),Object(le.jsx)(he.a,{children:Object(le.jsx)(ge,{})})]})})},Ce=function(){return Object(le.jsx)("div",{children:"This is a list of all my monsters:"})},Ne=n(95),Te=n(93),ke=n(90),Ie=n(91),Ae=function(){var e=oe(Z),t=oe($),n=oe(_),r=oe(ee),c=oe(ne),a=oe(re),i=oe(ce),u=ue();return Object(le.jsxs)(Te.a,{size:"lg",show:oe(te),onHide:function(){return u(K())},centered:!0,children:[Object(le.jsx)(Te.a.Header,{closeButton:!0,children:Object(le.jsx)(Te.a.Title,{children:"Quick Add Creature"})}),Object(le.jsx)(Te.a.Body,{children:Object(le.jsx)(Ne.a,{children:Object(le.jsxs)(he.a,{children:[Object(le.jsx)(ve.a,{children:Object(le.jsxs)(Ne.a.Group,{className:"mv-3",controlId:"exampleForm.ControlTextArea1",children:[Object(le.jsx)(Ne.a.Label,{children:"Name"}),Object(le.jsx)(Ne.a.Control,{value:e,onChange:function(e){u(J(e.target.value))},type:"text"})]})}),Object(le.jsx)(ve.a,{children:Object(le.jsxs)(Ne.a.Group,{className:"mv-3",controlId:"exampleForm.ControlTextArea1",children:[Object(le.jsx)(Ne.a.Label,{children:"Armor Class"}),Object(le.jsx)(Ne.a.Control,{value:t,onChange:function(e){u(Q(Number(e.target.value)))},type:"text"})]})}),Object(le.jsx)(ve.a,{children:Object(le.jsxs)(Ne.a.Group,{className:"mv-3",controlId:"exampleForm.ControlTextArea1",children:[Object(le.jsx)(Ne.a.Label,{children:"Max HP(Optional)"}),Object(le.jsx)(Ne.a.Control,{value:n,onChange:function(e){u(U(Number(e.target.value)))},type:"text"})]})}),Object(le.jsx)(ve.a,{children:Object(le.jsxs)(Ne.a.Group,{className:"mv-3",controlId:"exampleForm.ControlTextArea1",children:[Object(le.jsx)(Ne.a.Label,{children:"Initiative(Optional)"}),Object(le.jsx)(Ne.a.Control,{value:r,onChange:function(e){u(V(Number(e.target.value)))},type:"text"})]})}),Object(le.jsx)(ve.a,{children:Object(le.jsxs)(Ne.a.Group,{className:"mv-3",controlId:"exampleForm.ControlTextArea1",children:[Object(le.jsx)(Ne.a.Label,{children:"Creature Type"}),Object(le.jsx)(ke.a,{children:[{name:"Player",value:"player"},{name:"Monster",value:"monster"}].map((function(e,t){return Object(le.jsx)(Ie.a,{id:"radio-".concat(t),type:"radio",variant:t%2?"outline-danger":"outline-success",name:"radio",value:e.value,checked:i===e.value,onChange:function(e){return u(Y(e.currentTarget.value))},children:e.name},t)}))})]})})]})})}),Object(le.jsxs)(Te.a.Footer,{children:[Object(le.jsx)(pe.a,{variant:"secondary",onClick:function(){return u(K())},children:"Close"}),Object(le.jsx)(pe.a,{variant:"primary",onClick:function(){var o={name:e,ac:t,maxHp:n,initiative:r,currentHp:n,type:i};u(c?H({index:a,creature:o}):I(o)),u(K())},children:"Save Changes"})]})]})},He=(n(78),n(8)),we=n(92),Me=n(66),Se=function(e){var t=Object(r.useRef)(null),n=Object(r.useState)(!1),c=Object(He.a)(n,2),a=c[0],i=c[1],u=Object(r.useState)("0"),o=Object(He.a)(u,2),d=o[0],s=o[1],l=ue(),j=function(){s("0"),i(!1)};return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsxs)("div",{ref:t,onClick:function(){return i(!0)},style:{minWidth:"110px"},children:[Object(le.jsx)("div",{children:"HP"}),Object(le.jsxs)("div",{className:"flex-row align-items-center",children:[Object(le.jsx)("div",{className:"bg-white p-2 rounded d-inline-block",children:e.creature.currentHp}),Object(le.jsx)("span",{className:"mx-2",children:"/"}),Object(le.jsx)("span",{children:e.creature.maxHp})]})]}),Object(le.jsx)(we.a,{rootClose:!0,target:t.current,show:a,placement:"right",onHide:j,children:Object(le.jsx)(Me.a,{children:Object(le.jsxs)(me.a,{direction:"vertical",gap:2,children:[Object(le.jsx)(pe.a,{variant:"success",onClick:function(){l(E({index:e.index,amount:Number(d)})),j()},children:"Heal"}),Object(le.jsx)(Ne.a.Control,{value:d,type:"text",onChange:function(e){return t=e.target.value,void(isNaN(Number(t))&&""!==t||s(""===t?"":t));var t}}),Object(le.jsx)(pe.a,{variant:"danger",onClick:function(){l(E({index:e.index,amount:-Number(d)})),j()},children:"Damage"})]})})})]})},Ee=n(57);function qe(e){var t,n=ue();return Object(le.jsxs)("div",{className:"initiative-creature",children:[Object(le.jsx)("div",{children:Object(le.jsxs)("div",{children:[Object(le.jsx)("div",{children:"INITIATIVE"}),Object(le.jsx)(Ne.a.Control,{type:"text",value:null!==(t=e.creature.initiative)&&void 0!==t?t:"",style:{width:"100px"},className:"text-center",onChange:function(t){return n(w({index:e.index,newInitiative:t.target.value}))}})]})}),Object(le.jsxs)("div",{className:"flex-grow-1 text-start",children:[Object(le.jsx)("div",{className:"fw-bold",style:{fontSize:"1.5em"},children:e.creature.name}),Object(le.jsxs)("div",{children:["AC ",e.creature.ac]}),Object(le.jsxs)(me.a,{direction:"horizontal",gap:2,children:[Object(le.jsx)(pe.a,{onClick:function(){return n(X({index:e.index,creature:e.creature}))},children:"Edit"}),Object(le.jsx)(pe.a,{variant:"danger",onClick:function(){return n(A(e.index))},children:"Delete"})]})]}),Object(le.jsx)("div",{children:Object(le.jsx)(Se,{index:e.index,creature:e.creature})})]})}var ze=function(){var e=oe(R),t=ue();return Object(le.jsxs)("div",{children:[Object(le.jsxs)(me.a,{direction:"horizontal",gap:2,children:[Object(le.jsx)(pe.a,{onClick:function(){return t(W())},children:"Quick Add Creature"}),Object(le.jsx)(pe.a,{onClick:function(){return t(q())},children:"Roll Initiative"})]}),Object(le.jsx)(Ae,{}),Object(le.jsx)("div",{children:Object(le.jsx)(Ee.a,{onDragEnd:function(e){e.destination&&t(z({index:e.source.index,newIndex:e.destination.index}))},children:Object(le.jsx)(Ee.c,{droppableId:"droppable",children:function(t){return Object(le.jsxs)("div",Object(f.a)(Object(f.a)({},t.droppableProps),{},{ref:t.innerRef,children:[e.map((function(e,t){return Object(le.jsx)(Ee.b,{draggableId:e.uuid,index:t,children:function(n,r){return Object(le.jsx)("div",Object(f.a)(Object(f.a)(Object(f.a)({ref:n.innerRef},n.draggableProps),n.dragHandleProps),{},{style:(c=r.isDragging,a=n.draggableProps.style,Object(f.a)(Object(f.a)({userSelect:"none",marginBottom:"1rem"},a),{},{opacity:c?.5:1})),children:Object(le.jsx)(qe,{creature:e,index:t},e.uuid)}));var c,a}},e.uuid)})),t.placeholder]}))}})})})]})};function Pe(e){return Object(le.jsxs)("div",{className:"text-center fw-bold",children:[Object(le.jsx)("div",{children:e.text}),Object(le.jsx)("div",{style:{fontSize:"1.5em"},children:e.value+1})]})}function Fe(){var e=oe(P),t=oe(F),n=ue();return Object(le.jsx)(Oe.a,{fluid:!0,className:"p-2 mb-4",style:{borderBottom:"2px solid black"},children:Object(le.jsxs)(he.a,{className:"align-items-center",children:[Object(le.jsx)(ve.a,{children:Object(le.jsx)("h1",{className:"fw-bold",children:"Quick Encounter"})}),Object(le.jsx)(ve.a,{children:Object(le.jsxs)(me.a,{direction:"horizontal",gap:4,children:[Object(le.jsx)(Pe,{text:"ROUND",value:t}),Object(le.jsx)(Pe,{text:"TURN",value:e})]})}),Object(le.jsx)(ve.a,{md:"auto",children:Object(le.jsxs)(me.a,{direction:"horizontal",gap:2,children:[Object(le.jsx)(pe.a,{variant:"outline-primary",onClick:function(){return n(S())},children:"Previous turn"}),Object(le.jsx)(pe.a,{onClick:function(){return n(M())},children:"Next turn"})]})})]})})}var Re=function(){return Object(le.jsxs)("div",{children:[Object(le.jsx)(Fe,{}),Object(le.jsx)(ze,{})]})},Be=(n(79),function(){return Object(le.jsx)(de.a,{children:Object(le.jsx)(se.e,{children:Object(le.jsxs)(se.c,{path:"/",element:Object(le.jsx)(je,{}),children:[Object(le.jsxs)(se.c,{path:"encounters",children:[Object(le.jsx)(se.c,{index:!0,element:Object(le.jsx)(se.a,{replace:!0,to:"/"})}),Object(le.jsxs)(se.c,{path:":id",children:[Object(le.jsx)(se.c,{index:!0,element:Object(le.jsx)(xe,{})}),Object(le.jsx)(se.c,{path:"run",element:Object(le.jsx)(Re,{})})]})]}),Object(le.jsx)(se.c,{path:"monsters",element:Object(le.jsx)(Ce,{})}),Object(le.jsx)(se.c,{index:!0,element:Object(le.jsx)(ye,{})})]})})})});n(80),n(81);i.a.render(Object(le.jsx)(c.a.StrictMode,{children:Object(le.jsx)(u.a,{store:ie,children:Object(le.jsx)(Be,{})})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.4af7f9ad.chunk.js.map